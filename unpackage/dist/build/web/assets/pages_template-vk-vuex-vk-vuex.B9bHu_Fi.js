import{n as e,c as r,w as a,i as s,o as t,b as u,a as o,E as l,t as n,g as d,h as i,k as p,I as f,d as c}from"./index-CI1WKL_Z.js";import{_ as m}from"./_plugin-vue_export-helper.BCo6x5W8.js";var x=uni.vk;const v=m({data:()=>({form1:{username:"admin",password:"123456"}}),onLoad(e){x=uni.vk},methods:{register(){var e=this.form1;x.userCenter.register({data:e,success:e=>{x.alert("注册成功!")}})},login(){var e=this.form1;x.userCenter.login({data:e,success:e=>{x.setVuex("$user.userInfo",e.userInfo),x.alert("登陆成功!")}})},logout(){x.userCenter.logout({success:e=>{x.setVuex("$user.userInfo",{}),x.alert("退出成功")}})},uploadAvatar(){e({count:1,sizeType:["compressed"],success:e=>{x.uploadFile({title:"上传中...",filePath:e.tempFilePaths[0],fileType:"image",success(e){x.userCenter.setAvatar({data:{avatar:e.url},success(){x.setVuex("$user.userInfo.avatar",e.url)}})}})}})}},computed:{}},[["render",function(e,m,x,v,g,k){const V=s,b=i,_=p,y=f,I=c;return t(),r(V,{class:"content"},{default:a((()=>[u(V,null,{default:a((()=>[o(" Vuex可以用来做全局状态管理。 而此例子是演示将当前登录用户信息存入Vuex，以便于在其他页面中也能直接渲染或获取用户信息 ")])),_:1}),u(V,{style:{"margin-top":"10rpx"}},{default:a((()=>[o(" 说明: "),u(V,{style:{"margin-top":"10rpx"}},{default:a((()=>[o(" 1、"),u(b,null,{default:a((()=>[o("$user")])),_:1}),o(" 对应 store/modules 目录下的js文件"),l("br"),o(" 以下两个方式均可以对 vuex 数据进行操作"),l("br"),l("br"),o(" 方式一："),l("br"),o(" 获取 Vuex 数据："),l("br"),o(" vk.getVuex('$user.userInfo')"),l("br"),o(" 更新 Vuex 数据："),l("br"),o(" vk.setVuex('$user.userInfo.avatar', avatar)"),l("br"),l("br"),o(" 方式二："),l("br"),o(" 获取 Vuex 数据："),l("br"),o(" vk.vuex.get('$user.userInfo')"),l("br"),o(" 更新 Vuex 数据："),l("br"),o(" vk.vuex.set('$user.userInfo.avatar', avatar);"),l("br"),o(" 触发 Vuex action："),l("br"),o(" vk.vuex.dispatch('$user/addFootprint', data);"),l("br")])),_:1})])),_:1}),e.vk.getVuex("$user.userInfo._id")?(t(),r(V,{key:0,style:{color:"red","margin-top":"10rpx","font-size":"36rpx"}},{default:a((()=>[o(" 当前登录用户："+n(e.vk.getVuex("$user.userInfo.nickname")||e.vk.getVuex("$user.userInfo.username"))+" ",1),u(_,{src:e.vk.getVuex("$user.userInfo.avatar"),style:{width:"70rpx",height:"70rpx","border-radius":"50%"},mode:"aspectFill"},null,8,["src"])])),_:1})):d("",!0),u(V,{style:{"margin-top":"20rpx"}},{default:a((()=>[u(y,{type:"text",modelValue:g.form1.username,"onUpdate:modelValue":m[0]||(m[0]=e=>g.form1.username=e),placeholder:"用户名/邮箱/手机号"},null,8,["modelValue"]),u(y,{type:"text",modelValue:g.form1.password,"onUpdate:modelValue":m[1]||(m[1]=e=>g.form1.password=e),password:"true",placeholder:"密码"},null,8,["modelValue"]),u(I,{type:"default",onClick:k.register},{default:a((()=>[o("注册")])),_:1},8,["onClick"]),u(I,{type:"default",onClick:k.login},{default:a((()=>[o("登录")])),_:1},8,["onClick"]),u(I,{type:"default",onClick:k.uploadAvatar},{default:a((()=>[o("上传到云储存(并设置为头像)")])),_:1},8,["onClick"]),u(I,{type:"default",onClick:k.logout},{default:a((()=>[o("退出")])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-a6467de9"]]);export{v as default};
