import{s as e,p as o,c as s,w as a,i as t,o as l,b as n,a as i,k as r,I as c,d,q as u,h as g}from"./index-CI1WKL_Z.js";import{_ as p}from"./_plugin-vue_export-helper.BCo6x5W8.js";var m=uni.vk;const f=p({data:()=>({data:{},form1:{agreement:!0,username:"admin",password:"123456"},scrollTop:0,logoImage:"/static/logo.png"}),onPageScroll(e){this.scrollTop=e.scrollTop},onLoad(e){m=uni.vk,this.options=e,this.init(e)},onReady(){},onShow(){},onHide(){},onPullDownRefresh(){setTimeout((()=>{e()}),1e3)},onShareAppMessage(e){},methods:{init(e={}){console.log("init: ",e)},pageTo(e){m.navigateTo(e)},login(){let e=this;const{agreement:o,username:s,password:a}=e.form1;if(o)if(s.length<4)m.toast("账号至少4位数","none");else if(m.pubfn.test(a,"pwd")){var t=e.form1;m.userCenter.login({data:t,success:o=>{console.log("data",o),m.toast("登陆成功!"),setTimeout((()=>{e.login_success(o)}),1e3)}})}else m.toast("密码以字母开头，长度在6~18之间，只能包含字母、数字和下划线","none");else m.toast("请阅读并同意用户服务及隐私协议","none")},login_success(e){let s=this;if(this.options.uniIdRedirectUrl){let e=decodeURIComponent(this.options.uniIdRedirectUrl);if(e)return m.navigate.setOriginalPage(null),void m.redirectTo(e)}if(m.navigate.getOriginalPage())return m.navigate.originalTo(),!1;var a=o();if(a.length>1&&a[a.length-2]&&a[a.length-2].route&&-1==a[a.length-2].route.indexOf("login/index")){s.getOpenerEventChannel().emit("loginSuccess",{}),m.navigateBack()}else m.navigateToHome()},login_weixin(){let e=this;m.userCenter.loginByWeixin({success:o=>{m.toast("登陆成功!"),setTimeout((()=>{e.login_success(o)}),1e3)}})}},computed:{}},[["render",function(e,o,p,m,f,h){const v=r,_=t,w=c,T=d,x=u,y=g;return l(),s(_,{class:"app login"},{default:a((()=>[n(_,{class:"content"},{default:a((()=>[n(_,{class:"header"},{default:a((()=>[n(v,{class:"logo",src:f.logoImage},null,8,["src"])])),_:1}),n(_,{class:"form-view"},{default:a((()=>[n(_,{class:"form-item form-border"},{default:a((()=>[n(w,{class:"form-input",modelValue:f.form1.username,"onUpdate:modelValue":o[0]||(o[0]=e=>f.form1.username=e),type:"text",maxlength:50,placeholder:"用户名/手机号","placeholder-style":"'color':'#8e8e8e'"},null,8,["modelValue"])])),_:1}),n(_,{class:"form-item form-border"},{default:a((()=>[n(w,{class:"form-input",modelValue:f.form1.password,"onUpdate:modelValue":o[1]||(o[1]=e=>f.form1.password=e),type:"password",placeholder:"密码","placeholder-style":"'color':'#8e8e8e'"},null,8,["modelValue"])])),_:1})])),_:1}),n(_,{class:"login-btn"},{default:a((()=>[n(T,{class:"btn success circle","hover-class":"hover",onClick:h.login,plain:!1,type:"success",shape:"circle","hair-line":!1},{default:a((()=>[i("登 录")])),_:1},8,["onClick"])])),_:1}),n(_,{class:"login-icon-view"}),n(_,{class:"footer"},{default:a((()=>[n(x,{url:"../forget/forget","open-type":"navigate"},{default:a((()=>[i("找回密码")])),_:1}),n(y,{class:"center-line"},{default:a((()=>[i("|")])),_:1}),n(x,{url:"../register/register","open-type":"navigate"},{default:a((()=>[i("注册账号")])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-6c4e6d1d"]]);export{f as default};
