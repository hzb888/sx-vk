import{c as a,w as e,i as t,o as s,b as n,a as r,k as o,d as i,I as u,m as l}from"./index-CI1WKL_Z.js";import{_ as c}from"./_plugin-vue_export-helper.BCo6x5W8.js";var d=uni.vk;const f=c({data:()=>({userInfo:{avatar:"",nickname:""}}),onLoad(a={}){d=uni.vk,this.options=a,this.init(a)},onReady(){},onShow(){},onHide(){},methods:{init(a){this.userInfo.nickname=d.getVuex("$user.userInfo.nickname"),this.userInfo.avatar=d.getVuex("$user.userInfo.avatar")||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAAASFBMVEX09Pby8vTe3uDPz9DJycm/v8C9vb3BwcLLy8vR0dLp6evn5+i1tbWysrLb29zu7vDNzc7r6+26urrg4OG3t7fj4+TFxcbV1dY8QE/jAAABo0lEQVRo3u2Yi3KCMBBFCY8EIWs0Iv7/n7Y4djqFZEXCTVtnzw+cYZfsqygEQRAEQRAEQRCEt0OVVd1o0x66rNq+tvRFc8ymdSf6gTnn8XaeZthLDm8/0JIM5s5SiCvaq3TQS96BxRVFaLHeM0XBPuhTXAz9ZGfjYkJm+ch4CVnBak5cA8UDJx5wXkUsCiY+82Jcr+h5cf9+4o4X42qX48XACsIVLrI4b6E5sQaKW06M7BIlJy6BYsUk2eIKV8EMIEQV0lu4aJsYwENXtCPD9wkT9hq0NzJX2wy72/FXAj0xLr1jDm9g1LToNeLBYS4+5PEu23Kuq8Bi5oMWy78gvs7F8OX4QTMXN3m8gY3xlEHrgvtTDX/JF09BPPb80o0UZQSO1cw94J5pTLzVzdIT7A3wokv/THtP9d6jZm/WaCfMnquba9dqJ9rdUv08ufNU7xPl5jXtRLNDvG+vaydSP1qN27yf9STpZanVP/MSk2LeGOf0aG/4r75J6dKrqlUML+L/INYp4pQrUJUiTrlNqEr7jegq15gvCIIgCIIgCIIg7M4HkS5rj/A3dbUAAAAASUVORK5CYII="},submit(a){this.userInfo.nickname=a.detail.value.nickname,this.updateUserInfo()},onChooseAvatar(a){const e=a.detail.avatarUrl;this.userInfo.avatar=e},async updateUserInfo(){if(!this.userInfo.avatar||!this.userInfo.nickname)return void d.toast("头像和昵称不能为空");let a={};if(0!==this.userInfo.avatar.indexOf("https://")){let e=await d.uploadFile({filePath:this.userInfo.avatar,fileType:"image"});a.avatar=e.url}else a.avatar=this.userInfo.avatar;a.nickname=this.userInfo.nickname,d.userCenter.updateUser({data:a,success:a=>{d.alert("设置成功")}})}},watch:{},computed:{}},[["render",function(c,d,f,m,v,A){const I=o,p=t,h=i,g=u,k=l;return s(),a(p,{class:"app"},{default:e((()=>[n(k,{onSubmit:A.submit},{default:e((()=>[n(p,{class:"avatar-box"},{default:e((()=>[n(h,{size:"mini",class:"avatar-button",plain:"","open-type":"chooseAvatar",onChooseavatar:A.onChooseAvatar},{default:e((()=>[n(p,{class:"avatar-image-box"},{default:e((()=>[n(I,{class:"avatar-image",src:v.userInfo.avatar},null,8,["src"])])),_:1})])),_:1},8,["onChooseavatar"])])),_:1}),n(p,{class:"nickname-box"},{default:e((()=>[n(p,{class:"nickname"},{default:e((()=>[n(g,{class:"input",type:"nickname",name:"nickname",modelValue:v.userInfo.nickname,"onUpdate:modelValue":d[0]||(d[0]=a=>v.userInfo.nickname=a),placeholder:"请输入昵称","placeholder-style":"color: #8e8e8e;"},null,8,["modelValue"])])),_:1})])),_:1}),n(h,{"form-type":"submit",type:"primary",style:{"margin-top":"40rpx"}},{default:e((()=>[r("修改")])),_:1})])),_:1},8,["onSubmit"])])),_:1})}],["__scopeId","data-v-9f7fcd1d"]]);export{f as default};
