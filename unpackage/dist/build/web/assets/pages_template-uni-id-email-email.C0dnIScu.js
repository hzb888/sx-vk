import{j as e,c as l,w as t,i as a,o as d,b as s,a as i,t as o,I as n,d as f}from"./index-CI1WKL_Z.js";import{_ as u}from"./_plugin-vue_export-helper.BCo6x5W8.js";var r=uni.vk;const c=u({data:()=>({form1:{email:"",code:""}}),onLoad(e){r=uni.vk},methods:{getCode(){const e="00000"+Math.floor(1e6*Math.random());this.form1.code=e.substring(e.length-6)},sendEmailCode(l){if(/.+@.+/.test(this.form1.email)){var t=this.form1;r.userCenter.sendEmailCode({data:{serviceType:"qq",email:t.email,type:l},success:e=>{r.alert("邮件发送成功")}})}else e({content:"请输入正确的邮箱",showCancel:!1})},setVerifyCode(l){let t=this;if(/.+@.+/.test(t.form1.email)){t.getCode();var a=t.form1;r.userCenter.setVerifyCode({data:{email:a.email,code:a.code,type:l},success:e=>{r.toast("发送成功")}})}else e({content:"请输入正确的邮箱",showCancel:!1})},loginByEmail(){var e=this.form1;r.userCenter.loginByEmail({data:e,success:e=>{r.alert("登录成功")}})},bindEmail(){var e=this.form1;r.userCenter.bindEmail({data:e,success:e=>{r.alert("绑定成功")}})},unbindEmail(){var e=this.form1;r.userCenter.unbindEmail({data:e,success:e=>{r.alert("解绑成功")}})}}},[["render",function(e,u,r,c,m,p){const C=n,y=a,_=f;return d(),l(y,{class:"content"},{default:t((()=>[s(C,{type:"text",placeholder:"邮箱",modelValue:m.form1.email,"onUpdate:modelValue":u[0]||(u[0]=e=>m.form1.email=e)},null,8,["modelValue"]),s(C,{type:"text",placeholder:"验证码",modelValue:m.form1.code,"onUpdate:modelValue":u[1]||(u[1]=e=>m.form1.code=e)},null,8,["modelValue"]),s(y,{class:"tips",style:{color:"red"}},{default:t((()=>[i("上次发送的验证码："+o(m.form1.code),1)])),_:1}),s(y,{class:"title"},{default:t((()=>[i("邮箱注册&登录相关")])),_:1}),s(y,{class:"tips",style:{"text-align":"left"}},{default:t((()=>[i("如需要使用此功能，先确保已安装npm包 "),s(y,null,{default:t((()=>[i('"nodemailer": "^6.4.11"')])),_:1})])),_:1}),s(y,{style:{display:"flex"}},{default:t((()=>[s(_,{type:"default",onClick:u[2]||(u[2]=e=>p.sendEmailCode("login"))},{default:t((()=>[i("真实-发送验证码")])),_:1}),s(_,{type:"default",onClick:u[3]||(u[3]=e=>p.setVerifyCode("login"))},{default:t((()=>[i("模拟-发送验证码")])),_:1})])),_:1}),s(_,{type:"default",onClick:p.loginByEmail},{default:t((()=>[i("邮箱验证码登录（不存在则注册）")])),_:1},8,["onClick"]),s(y,{class:"title"},{default:t((()=>[i("绑定邮箱相关")])),_:1}),s(y,{style:{display:"flex"}},{default:t((()=>[s(_,{type:"default",onClick:u[4]||(u[4]=e=>p.sendEmailCode("bind"))},{default:t((()=>[i("真实-发送验证码")])),_:1}),s(_,{type:"default",onClick:u[5]||(u[5]=e=>p.setVerifyCode("bind"))},{default:t((()=>[i("模拟-发送验证码")])),_:1})])),_:1}),s(_,{type:"default",onClick:p.bindEmail},{default:t((()=>[i("绑定邮箱（需先登录）")])),_:1},8,["onClick"]),s(y,{class:"tips"},{default:t((()=>[i("绑定邮箱时如果不传验证码或者传空则直接绑定并设置email_confirmed为1，不会去校验验证码")])),_:1}),s(y,{class:"title"},{default:t((()=>[i("解绑邮箱相关")])),_:1}),s(y,{style:{display:"flex"}},{default:t((()=>[s(_,{type:"default",onClick:u[6]||(u[6]=e=>p.sendEmailCode("unbind"))},{default:t((()=>[i("真实-发送验证码")])),_:1}),s(_,{type:"default",onClick:u[7]||(u[7]=e=>p.setVerifyCode("unbind"))},{default:t((()=>[i("模拟-发送验证码")])),_:1})])),_:1}),s(_,{type:"default",onClick:p.unbindEmail},{default:t((()=>[i("解绑邮箱（需先登录）")])),_:1},8,["onClick"]),s(y,{class:"tips"},{default:t((()=>[i("解绑邮箱时如果不传验证码或者传空则直接解除绑定绑定，不会去校验验证码")])),_:1})])),_:1})}],["__scopeId","data-v-27987af6"]]);export{c as default};
